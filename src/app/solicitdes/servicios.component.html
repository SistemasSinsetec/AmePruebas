<div class="form-grid">
  <div class="form-field">
    <label>Cliente *</label>
    <input type="text" placeholder="Nombre del cliente" [(ngModel)]="solicitud.cliente" />
  </div>

  <div class="form-field">
    <label>Solicitante *</label>
    <input type="text" placeholder="Persona que solicita" [(ngModel)]="solicitud.solicitante" />
  </div>

  <div class="form-field">
    <label>Representante *</label>
    <input
      type="text"
      placeholder="Representante autorizado"
      [(ngModel)]="solicitud.representante"
    />
  </div>

  <div class="form-field">
    <label>Ubicación</label>
    <input type="text" placeholder="Dirección o área" [(ngModel)]="solicitud.ubicacion" />
  </div>

  <div class="form-field full">
    <label>Descripción del servicio</label>
    <textarea
      rows="3"
      placeholder="Describe brevemente el servicio requerido..."
      [(ngModel)]="solicitud.descripcionServicio"
    ></textarea>
  </div>
</div>

<div class="actions">
  <button class="btn btn-primary" (click)="nextStep()">Siguiente →</button>
</div>

<!-- Paso 2: Partidas -->
<div class="actions mb-2">
  <button class="btn btn-success" (click)="addPartida()">➕ Añadir partida</button>
</div>

<div *ngFor="let p of partidas; let i = index" class="partida">
  <span>📦 Partida {{ i + 1 }}</span>
  <button class="btn btn-danger btn-sm" *ngIf="partidas.length > 1" (click)="eliminarPartida(i)">
    Eliminar
  </button>

  <div class="form-grid">
    <div class="form-field">
      <label>Tipo de trabajo</label>
      <input type="text" [(ngModel)]="p.tipoTrabajo" />
    </div>

    <div class="form-field">
      <label>Naturaleza</label>
      <input type="text" [(ngModel)]="p.naturalezaTrabajo" />
    </div>

    <div class="form-field">
      <label>Máquina</label>
      <input type="text" [(ngModel)]="p.tipoMaquina" />
    </div>

    <div class="form-field">
      <label>Fecha</label>
      <input type="date" [(ngModel)]="p.fecha" />
    </div>

    <div class="form-field">
      <label>Cantidad</label>
      <input type="number" min="1" [(ngModel)]="p.cantidad" />
    </div>

    <div class="form-field">
      <label>Precio</label>
      <input type="number" min="0" step="0.01" [(ngModel)]="p.precioUnitario" />
    </div>

    <div class="form-field full">
      <label>Comentario</label>
      <textarea rows="2" [(ngModel)]="p.comentario"></textarea>
    </div>
  </div>
</div>

<!-- Totales -->
<div class="totales">
  <p><strong>Subtotal:</strong> {{ subtotal | currency }}</p>
  <p><strong>IVA:</strong> {{ ivaTotal | currency }}</p>
  <p class="total"><strong>Total:</strong> {{ total | currency }}</p>
</div>

<div class="actions">
  <button class="btn btn-secondary" (click)="prevStep()">← Anterior</button>
  <button class="btn btn-success" (click)="onSubmit()">💾 Guardar</button>
</div>
